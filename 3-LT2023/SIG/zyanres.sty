\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{zyanres}[2022/05/24 Zihan Yan's Research LaTeX Package]

%----------Dependencies----------

\RequirePackage{amsmath}
\RequirePackage{amssymb}
\RequirePackage{amsfonts}
\RequirePackage{amsthm}
\RequirePackage[dvipsnames]{xcolor}
\RequirePackage{physics}
\RequirePackage{url}
\RequirePackage{tensor}
\RequirePackage{graphicx}
\RequirePackage{float}
\RequirePackage{mathrsfs}
\RequirePackage{mathtools}
\RequirePackage{bm}
\RequirePackage{cancel}
\RequirePackage{tikz}
\RequirePackage[shortlabels]{enumitem}
\RequirePackage{mdframed}
\RequirePackage[pdftex,hidelinks]{hyperref}
\RequirePackage{tikz-cd}
\RequirePackage[noadjust]{cite}
\RequirePackage{fancyhdr}
\RequirePackage{tikz-feynhand}

\allowdisplaybreaks

\theoremstyle{definition}
\newtheorem{defi}{Definition}
\newtheorem*{defi*}{Definition}
\newtheorem*{prpt}{Properties}
\newtheorem{ex}[defi]{Example}
\newtheorem*{ex*}{Example}
\newtheorem*{exer}{Exercise}
\newtheorem*{deri}{Derivation}


\theoremstyle{plain}
\newtheorem{thm}[defi]{Theorem}
\newtheorem*{thm*}{Theorem}
\newtheorem{lem}[defi]{Lemma}
\newtheorem*{lem*}{Lemma}
\newtheorem{prop}[defi]{Proposition}
\newtheorem*{prop*}{Proposition}
\newtheorem{clm}[defi]{Claim}
\newtheorem*{clm*}{Claim}
\newtheorem{cor}[defi]{Corollary}
\newtheorem*{cor*}{Corollary}
\newtheorem{law}[defi]{Law}
\newtheorem*{law*}{Law}
\newtheorem{pos}[defi]{Postulate}
\newtheorem*{pos*}{Postulate}



\theoremstyle{remark}
\newtheorem*{nt}{Note}
\newtheorem*{cmt}{Comment}
\newtheorem*{ntc}{Comment by Note Taker}
\newtheorem*{rmk}{Remark}
\newtheorem*{hint}{Hint}

%----------Geometry and Format----------

\RequirePackage[margin=2.5cm]{geometry}
\RequirePackage[british]{babel}
\setlength{\parskip}{0.25em}
\setlength{\parindent}{0em}

\renewcommand{\maketitle}{
	\begingroup
	\renewcommand\thefootnote{\@fnsymbol\c@footnote}
	\begin{center}
		\vspace*{1cm}
		{\LARGE\bfseries\@title\par}%
		\vspace*{0.7cm}
		{\large \@author\par}%
		\vspace*{0.3cm}
		{\@date\par}
	\end{center}
	\setcounter{footnote}{0}
	\endgroup
	}

\newcommand{\maketitlepage}{
	\begingroup
	\begin{titlepage}%
		\renewcommand\thefootnote{\@fnsymbol\c@footnote}
		\centering%
		\vspace*{7cm}%
		{\Huge \sffamily\bfseries\@title\par}%
		\vspace{2cm}%
		{\Large \@author\par}%
		\vspace{1cm}%
		{\large \@date\par}%
		\vspace*{\fill}%
\end{titlepage}
\setcounter{footnote}{0}
\endgroup
}

\RequirePackage{etoolbox}
\patchcmd{\chapter}{\thispagestyle{plain}}{\thispagestyle{fancy}}{}{}

\pagestyle{fancy}
\fancyhead{}
\fancyfoot[L]{{\color{blue}\footnotesize \sffamily \textbf{Draft} -- Last Updated: \today}}
\renewcommand{\headrulewidth}{0pt}

\DeclareOption{pub}{
	\pagestyle{plain}
} 

\DeclareOption{workbook}{
	\renewcommand{\maketitle}{
	\begin{center}
		\vspace*{1cm}
		{\LARGE\bfseries\@title}\\[0.5em]
		{\color{blue}\sffamily\bfseries WORKBOOK\par}%
		\vspace*{0.7cm}
		{\large \@author\par}%
		\vspace*{0.3cm}
		{\@date\par}
	\end{center}}
} 

\DeclareOption*{\PackageWarning{zyanres}{Unknown '\CurrentOption'}}
\ProcessOptions\relax

%----------New Commands/Operators----------

\newcommand{\der}{\partial}
\newcommand{\del}{\nabla}
\newcommand{\df}{\vb{d}}
\newcommand{\R}{\mathbb R}
\newcommand{\M}{\mathcal M}
\newcommand{\N}{\mathbb N}
\renewcommand{\a}{\alpha}
\renewcommand{\b}{\beta}
\newcommand{\g}{\gamma}
\renewcommand{\d}{\delta}
\newcommand{\e}{\eta}
\newcommand{\f}{\phi}
\newcommand{\h}{\theta}
\renewcommand{\k}{\kappa}
\renewcommand{\l}{\lambda}
\newcommand{\m}{\mu}
\newcommand{\n}{\nu}
\renewcommand{\o}{\omega}
\renewcommand{\r}{\rho}
\newcommand{\s}{\sigma}
\renewcommand{\t}{\tau}
\newcommand{\chr}[3]{\left\{\smqty{#1\\ #2\ #3}\right\}}
\newcommand{\rk}[2]{\left(\smqty{#1\\ #2}\right)}
\newcommand{\smf}[0]{\mathcal C^{\infty}}
\newcommand{\ts}[2]{T_{#1}(#2)}
\newcommand{\cts}[2]{T^{\ast}_{#1}(#2)}
\renewcommand{\i}{\indices}
\DeclareMathOperator{\diag}{diag}
\renewcommand{\L}{\mathcal L}
\renewcommand{\S}{\mathcal S}
\newcommand{\G}{\Gamma}
\newcommand{\conn}[3]{\G^{#1}_{#2#3}}
\newcommand{\vconn}[3]{{\G'}^{#1}_{#2#3}}
\newcommand{\0}{\varnothing}
\newcommand{\smooth}{C^\infty}
\newcommand{\U}{\mathcal U}
\renewcommand{\O}{\mathcal O}
\newcommand{\DD}{\mathrm D}
\newcommand{\Dvv}[1]{\frac{\DD}{\DD #1}}
\newcommand{\Dv}[2]{\frac{\DD #1}{\DD #2}}
\newcommand{\LT}[2]{\Lambda\i{^{#1}_{#2}}}
\newcommand{\iLT}[2]{\Lambda\i{_{#1}^{#2}}}
\newcommand{\ten}[1]{\underline{\underline{#1}}}
\renewcommand{\P}{\Psi}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\dbar}{{\mathrm{d}\mkern-7mu\mathchar'26\mkern-2mu}}
\newcommand{\E}{\mathcal E}
\newcommand{\ep}{\epsilon}
\newcommand{\vep}{\varepsilon}
\newcommand{\Dvt}[1]{\Dv{#1}{t}}
\newcommand{\pdvt}[1]{\pdv{#1}{t}}
\newcommand{\D}{\Delta}
\newcommand{\circled}[1]{\raisebox{.5pt}{\textcircled{\raisebox{-.9pt} {#1}}}}
\newcommand{\ii}{\mathrm{i}}
\newcommand{\Rq}{\Rightarrow\qquad}
\DeclareMathOperator{\cpf}{\circ}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\hme}{\xrightarrow{\sim}}
\newcommand{\needfig}[1]{{\color{Purple}[Need figure {#1} here.]}}

\newcommand{\RP}[1]{\mathbb{RP}^{#1}}
\newcommand{\CP}[1]{\mathbb{CP}^{#1}}
\newcommand{\Gr}[2]{\mathrm{Gr}({#1},{#2})}

\DeclareMathOperator{\Der}{Der}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\Mat}{Mat}
\newcommand{\1}{\mathbbm{1}}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\SL}{SL}
\DeclareMathOperator{\SU}{SU}
\DeclareMathOperator{\SO}{SO}
\DeclareMathOperator{\Og}{O}
\DeclareMathOperator{\Ug}{U}
\newcommand{\ddp}{\mathcal{D}}
\DeclareMathOperator{\Sp}{Sp}
\DeclareMathOperator{\codim}{codim}
\DeclareMathOperator{\Span}{Span}
\newcommand{\kgb}[1]{\expval{#1}_{\text{KG}}}
\newcommand{\scri}{\mathcal{I}}
\newcommand{\comment}[1]{{\color{blue}\sffamily #1}}
\newcommand{\original}{\color{Brown}}
\newcommand{\dsym}[1]{(\!(#1)\!)}
\newcommand{\stamp}[1]{[\textit{Added #1}]

}
\newcommand{\warning}{\color{red}}